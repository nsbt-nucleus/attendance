const _0x1cdf10=(function(){let _0x6af8c3=!![];return function(_0x487da9,_0x4311ec){const _0x2a7af8=_0x6af8c3?function(){if(_0x4311ec){const _0x3cd61a=_0x4311ec['apply'](_0x487da9,arguments);return _0x4311ec=null,_0x3cd61a;}}:function(){};return _0x6af8c3=![],_0x2a7af8;};}()),_0x52e245=_0x1cdf10(this,function(){return _0x52e245['toString']()['search']('(((.+)+)+)+$')['toString']()['constructor'](_0x52e245)['search']('(((.+)+)+)+$');});_0x52e245();import{server}from'./config.js';$(function(){function _0x393cee(_0x3956c7,_0x5c1545){(_0x5c1545===undefined||_0x5c1545===null)&&(_0x5c1545='Something\x20went\x20wrong...');let _0x105be9=new Date(),_0x1ea4f8='toast'+_0x105be9['getHours']()+_0x105be9['getMinutes']()+_0x105be9['getSeconds'](),_0x42a782=$('<div\x20class=\x22toast\x22\x20role=\x22alert\x22\x20id=\x22'+_0x1ea4f8+'\x22\x20aria-live=\x22assertive\x22\x20aria-atomic=\x22true\x22></div>'),_0x534341=$('<div\x20class=\x22toast-header\x22>\x20<strong\x20class=\x22me-auto\x22>'+_0x3956c7+'</strong>\x20<button\x20type=\x22button\x22\x20class=\x22btn-close\x22\x20data-bs-dismiss=\x22toast\x22\x20aria-label=\x22Close\x22></button>\x20</div>'),_0x4f713f=$('<div\x20class=\x22toast-body\x22>'+_0x5c1545+'</div>');return _0x534341['appendTo'](_0x42a782),_0x4f713f['appendTo'](_0x42a782),$('.toast-container')['append'](_0x42a782),$('#'+_0x1ea4f8)['toast']('show'),setTimeout(function(){_0x42a782['remove']();},0x31*0x35+-0x1*-0x38f+-0x1fc),_0x1ea4f8;}let _0x48b68d=undefined;const _0x3fda58={};_0x3fda58['ideal']=0xa,_0x3fda58['max']=0xf;const _0x52e895={};_0x52e895['frameRate']=_0x3fda58;const _0x1a9803={};_0x1a9803['facingMode']='user',_0x1a9803['video']=_0x52e895;const _0x530410={};_0x530410['audio']=![],_0x530410['video']=_0x1a9803;const _0x1a51e7=_0x530410;setInterval(function(){let _0x3b58b9=$('#userId')['val']();_0x3b58b9==='scanning'||_0x3b58b9['length']==0x12*-0x21f+-0x15db+0x3c09?($('#btnUpload')['attr']('disabled','disabled'),$('#btnOutTime')['attr']('disabled','disabled')):setTimeout(function(){$('#btnUpload')['removeAttr']('disabled'),$('#btnOutTime')['removeAttr']('disabled');},0xd10+0xb*0x149+-0x193f*0x1);},0x25ff*0x1+-0x1376+-0x1225);function _0x3c2b75(_0x4a7ec4){if(_0x4a7ec4['length']==0x122*-0x1+0x2676+-0x2554)return null;var _0x181c2f={},_0x4a5840=_0x4a7ec4[-0x1*-0x2fe+-0x971*0x1+0x673],_0x10ea74=0x161e+0x9ac*0x4+-0x3ccd;for(var _0x228ac1=0x203c+0x17a2+-0x1bef*0x2;_0x228ac1<_0x4a7ec4['length'];_0x228ac1++){var _0x3c4db6=_0x4a7ec4[_0x228ac1];if(_0x181c2f[_0x3c4db6]==null)_0x181c2f[_0x3c4db6]=-0x1f00+0x8c9+0x2*0xb1c;else _0x181c2f[_0x3c4db6]++;_0x181c2f[_0x3c4db6]>_0x10ea74&&(_0x4a5840=_0x3c4db6,_0x10ea74=_0x181c2f[_0x3c4db6]);}return _0x4a5840;}let _0xa7e8cf=[];const _0x2a0a1a={};_0x2a0a1a['keyboard']=!![];var _0xbc7106=new bootstrap['Modal'](document['getElementById']('attendance-alert'),_0x2a0a1a);$('.dismiss')['click'](()=>{_0xbc7106['hide']();});const _0x278881={};_0x278881['width']=0x168,_0x278881['height']=0x10e,_0x278881['image_format']='jpeg',_0x278881['jpeg_quality']=0x64,Webcam['set'](_0x278881),Webcam['attach']('#webcam');const _0x3e6a62=document['getElementsByTagName']('video')[0xcb8+-0x7eb+-0x1*0x4cd];Promise['all']([faceapi['nets']['ssdMobilenetv1']['loadFromUri']('../../models'),faceapi['nets']['faceRecognitionNet']['loadFromUri']('../../models'),faceapi['nets']['faceLandmark68Net']['loadFromUri']('../../models')])['then'](_0x179e5a);const _0x35c74d=async()=>{const _0x10cf80=await fetch(server+'/users');return _0x10cf80['json']();};function _0x179e5a(){navigator['mediaDevices']['getUserMedia'](_0x1a51e7)['then'](_0x43932d=>{_0x3e6a62['srcObject']=_0x43932d;})['catch'](_0x2ee6de=>{_0x393cee('error\x20starting\x20web\x20cam',_0x2ee6de);});}async function _0x4e80a4(){const _0x3ee41d=await _0x35c74d(),_0x3de8a4=[];return _0x3ee41d['data'][0x1*-0x1049+0xdb1+0x298*0x1]['forEach']((_0x5cae54,_0xd808d9)=>{_0x3de8a4['push'](_0x5cae54['userId']);}),console['log'](_0x3de8a4),Promise['all'](_0x3de8a4['map'](async _0x1d686b=>{const _0x4812d9=[];for(let _0x17e230=-0x1*0xe7d+0x1951+-0xad3*0x1;_0x17e230<=0x200c+-0xd*-0xd+-0x20b3*0x1;_0x17e230++){console['log']('../../labels/'+_0x1d686b+'/'+_0x17e230+'.jpg');const _0x3ebc2e=await faceapi['fetchImage']('../../labels/'+_0x1d686b+'/'+_0x17e230+'.jpg'),_0x5b0cd5=await faceapi['detectSingleFace'](_0x3ebc2e)['withFaceLandmarks']()['withFaceDescriptor']();if(!_0x5b0cd5)throw new Error('no\x20faces\x20detected\x20for\x20'+_0x1d686b);_0x4812d9['push'](_0x5b0cd5['descriptor']);}return new faceapi['LabeledFaceDescriptors'](_0x1d686b,_0x4812d9);}));}_0x3e6a62['addEventListener']('play',async()=>{const _0xf2f5e2=0x211d+0x1*-0x2287+0x16a+0.48,_0x191e54=await _0x4e80a4(),_0x24d977=new faceapi['FaceMatcher'](_0x191e54,_0xf2f5e2);$('#spinner')['hide']();const _0x5afd23=faceapi['createCanvasFromMedia'](_0x3e6a62);$('#canvas')['empty'](),$('#canvas')['append'](_0x5afd23);const _0x5165c8={};_0x5165c8['width']=0x168,_0x5165c8['height']=0x10e;const _0x5f56e1=_0x5165c8;faceapi['matchDimensions'](_0x5afd23,_0x5f56e1),setInterval(async()=>{const _0x2a91a6=await faceapi['detectAllFaces'](_0x3e6a62)['withFaceLandmarks']()['withFaceDescriptors'](),_0x5b4cd9=faceapi['resizeResults'](_0x2a91a6,_0x5f56e1);_0x5afd23['getContext']('2d')['clearRect'](0x2240+-0x19a0+-0xb8*0xc,0xd*0x151+-0x8db*0x3+0x974,_0x5afd23['width'],_0x5afd23['height']);const _0x3db575=_0x5b4cd9['map'](_0x59b157=>{return _0x24d977['findBestMatch'](_0x59b157['descriptor'],_0xf2f5e2);});_0x3db575['length']>=0x1d9*0x4+-0x780+0x1e&&_0x393cee('attendance\x20alert','only\x20one\x20person\x20at\x20a\x20time\x20please'),_0x3db575['length']==0x1508+-0x43*-0x7d+-0x35be&&_0x3db575['forEach']((_0x56ac35,_0x18ce65)=>{const _0x307ed1=_0x5b4cd9[_0x18ce65]['detection']['box'],_0x59531a={};_0x59531a['label']=_0x56ac35;const _0x42348c=new faceapi['draw']['DrawBox'](_0x307ed1,_0x59531a);_0x42348c['draw'](_0x5afd23),_0xa7e8cf['push'](_0x56ac35['_label']);if(_0xa7e8cf['length']>=-0xd20+0x194a+0x1*-0xc25){let _0xdb73d3=_0x3c2b75(_0xa7e8cf);_0xa7e8cf=[],$('#userId')['val'](_0xdb73d3);let _0x3e50b4=$('#userId')['val']();_0x3e50b4==='scanning'&&$('#userId')['val']('scanning'),_0x3e50b4!=='scanning'&&_0x3e50b4!=_0x48b68d&&(console['log']('capturing....'),_0x48b68d=_0x3e50b4,$('#btnCapture')['click']());}});},0x194+-0x1*-0x109a+-0x1166);}),$('#btnCapture')['click'](function(){Webcam['snap'](function(_0x1b14a3){$('#imgCapture')[0x1*-0x121d+-0x4*-0x96f+0x139f*-0x1]['src']=_0x1b14a3,$('#btnUpload')['removeAttr']('disabled');});}),$('#btnUpload')['click'](function(){$('#btnUpload')['html']('<div\x20class=\x22spinner-border\x22\x20role=\x22status\x22\x20></div>');const _0x2fc9fe=$('#imgCapture')[0x9*0x3e7+0x1c9c+-0x3fbb]['src'],_0x497e22=$('#userId')['val']();if(_0x497e22===undefined||_0x497e22['length']==0x23ff+0x8*-0x61+-0x20f7){$('#btnUpload')['text']('in-time'),_0x393cee('userId\x20cannot\x20be\x20empty');return;}const _0x43ede2={};_0x43ede2['data']=_0x2fc9fe,_0x43ede2['userId']=_0x497e22;const _0x2b473a=_0x43ede2;console['log'](_0x2b473a['email']);const _0x50a71d=JSON['stringify'](_0x2b473a);$['ajax']({'type':'POST','url':server+'/attendance/in-time','contentType':'application/json','data':JSON['stringify'](_0x2b473a),'dataType':'json','success':function(_0x5a91cd){$('#btnUpload')['text']('in-time'),console['log'](_0x5a91cd),_0x393cee('attendance\x20in-time\x20register\x20successfully',_0x5a91cd['message']);},'error':function(_0x336f70){$('#btnUpload')['text']('in-time'),console['log'](_0x336f70);let _0xf74aa3=JSON['parse'](_0x336f70['responseText'])['message'];JSON['parse'](_0x336f70['responseText'])['errors']['forEach'](_0x18e364=>_0xf74aa3+='<br>\x20'+_0x18e364),_0x393cee('attendance\x20in-time\x20register\x20failed',_0xf74aa3);}});}),$('#btnOutTime')['click'](function(){$('#btnOutTime')['html']('<div\x20class=\x22spinner-border\x22\x20role=\x22status\x22\x20></div>');const _0x497536=$('#userId')['val']();if(_0x497536===undefined||_0x497536['length']==-0x1852+0x92*-0x3+0x1a08){$('#btnOutTime')['text']('out-time'),_0xbc7106['show'](),$('.modal-title')['text']('cannot\x20take\x20attendance'),$('.modal-body\x20>\x20p')['text']('userId\x20cannot\x20be\x20empty');return;}$['ajax']({'type':'GET','url':server+'/attendance/out-time/'+_0x497536,'success':function(_0x4776a5){$('#btnOutTime')['text']('out-time'),_0x393cee('attendance\x20out-time\x20register\x20successfully',_0x4776a5['message']);},'error':function(_0x39ace0){$('#btnOutTime')['text']('out-time'),console['log'](_0x39ace0);let _0x5b30f3=JSON['parse'](_0x39ace0['responseText'])['message'];JSON['parse'](_0x39ace0['responseText'])['errors']['forEach'](_0x4e3c4d=>_0x5b30f3+='<br>\x20'+_0x4e3c4d),_0x393cee('attendance\x20in-time\x20register\x20failed',_0x5b30f3);}});});});